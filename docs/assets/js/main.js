"use strict";const palette1=document.querySelector("#palette1"),palette2=document.querySelector("#palette2"),palette3=document.querySelector("#palette3"),cardPreview=document.querySelector("#cardId"),contactIcons=document.querySelectorAll(".contact-icon");function previewPalette1(){cardPreview.classList.add("select-palette1"),cardPreview.classList.remove("select-palette2"),cardPreview.classList.remove("select-palette3");for(let e of contactIcons)e.classList.add("contact-icon-palette1"),e.classList.remove("contact-icon-palette2"),e.classList.remove("contact-icon-palette3")}function previewPalette2(){cardPreview.classList.add("select-palette2"),cardPreview.classList.remove("select-palette1"),cardPreview.classList.remove("select-palette3");for(let e of contactIcons)e.classList.add("contact-icon-palette2"),e.classList.remove("contact-icon-palette1"),e.classList.remove("contact-icon-palette3")}function previewPalette3(){cardPreview.classList.add("select-palette3"),cardPreview.classList.remove("select-palette2"),cardPreview.classList.remove("select-palette1");for(let e of contactIcons)e.classList.add("contact-icon-palette3"),e.classList.remove("contact-icon-palette2"),e.classList.remove("contact-icon-palette1")}palette1.addEventListener("change",previewPalette1),palette2.addEventListener("change",previewPalette2),palette3.addEventListener("change",previewPalette3);let inputFullName=document.querySelector("#fullName"),inputJob=document.querySelector("#job");const cardName=document.querySelector("#cardName"),cardJob=document.querySelector("#cardJob");function printName(){cardName.innerHTML=inputFullName.value}function printJob(){cardJob.innerHTML=inputJob.value}inputFullName.addEventListener("keyup",printName),inputJob.addEventListener("keyup",printJob);let inputEmail=document.querySelector("#email"),inputTelf=document.querySelector("#telf"),inputLinkedin=document.querySelector("#linkedin"),inputGithub=document.querySelector("#github");const cardEmail=document.querySelector("#cardEmail"),cardTelf=document.querySelector("#cardTelf"),cardLinkedin=document.querySelector("#cardLinkedin"),cardGithub=document.querySelector("#cardGithub"),linkEmail=document.querySelector("#linkEmail"),linkLinkedin=document.querySelector("#linkLinkedin"),linkGithub=document.querySelector("#linkGithub"),linkTelf=document.querySelector("#linkTelf");function fillTelf(){0!==inputTelf.value.length?(cardTelf.classList.remove("hidden"),linkTelf.href=`tel:${inputTelf.value}`):cardTelf.classList.add("hidden")}function fillEmail(){0!==inputEmail.value.length?(cardEmail.classList.remove("hidden"),linkEmail.href=`mailto:${inputEmail.value}`):cardEmail.classList.add("hidden")}function fillLinkedin(){0!==inputLinkedin.value.length?(cardLinkedin.classList.remove("hidden"),linkLinkedin.href=`https://www.linkedin.com/in/${inputLinkedin.value}/`):cardLinkedin.classList.add("hidden")}function fillGithub(){0!==inputGithub.value.length?(cardGithub.classList.remove("hidden"),linkGithub.href=`https://www.github.com/${inputGithub.value}`):cardGithub.classList.add("hidden")}inputTelf.addEventListener("keyup",fillTelf),inputEmail.addEventListener("keyup",fillEmail),inputLinkedin.addEventListener("keyup",fillLinkedin),inputGithub.addEventListener("keyup",fillGithub);const formTopDesign=document.querySelector("#form-top-design"),formBottomDesign=document.querySelector("#form-bottom-design"),formTopFill=document.querySelector("#form-top-fill"),formBottomFill=document.querySelector("#form-bottom-fill"),formTopShare=document.querySelector("#form-top-share"),formBottomShare=document.querySelector("#form-bottom-share"),arrowDesign=document.querySelector("#arrow-design"),arrowFill=document.querySelector("#arrow-fill"),arrowShare=document.querySelector("#arrow-share");function toggleDesign(){formBottomDesign.classList.toggle("form-bottom-collapse"),formBottomFill.classList.remove("form-bottom-collapse"),formBottomShare.classList.remove("form-bottom-collapse"),arrowDesign.classList.toggle("form-arrow-collapse"),arrowFill.classList.remove("form-arrow-collapse"),arrowShare.classList.remove("form-arrow-collapse")}function toggleFill(){formBottomFill.classList.toggle("form-bottom-collapse"),formBottomDesign.classList.remove("form-bottom-collapse"),formBottomShare.classList.remove("form-bottom-collapse"),arrowFill.classList.toggle("form-arrow-collapse"),arrowDesign.classList.remove("form-arrow-collapse"),arrowShare.classList.remove("form-arrow-collapse")}function toggleShare(){formBottomShare.classList.toggle("form-bottom-collapse"),formBottomDesign.classList.remove("form-bottom-collapse"),formBottomFill.classList.remove("form-bottom-collapse"),arrowShare.classList.toggle("form-arrow-collapse"),arrowFill.classList.remove("form-arrow-collapse"),arrowDesign.classList.remove("form-arrow-collapse")}function validateEmail(){const e=document.querySelector("#error-email");return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(inputEmail.value)?(inputEmail.classList.remove("input-error"),e.classList.add("hidden"),!0):(inputEmail.classList.add("input-error"),e.classList.remove("hidden"),!1)}formTopDesign.addEventListener("click",toggleDesign),formTopFill.addEventListener("click",toggleFill),formTopShare.addEventListener("click",toggleShare),inputEmail.addEventListener("change",validateEmail);const globalError=document.querySelector("#error-name-job");function validateFullName(){return""===inputFullName.value?(inputFullName.classList.add("input-error"),!1):(inputFullName.classList.remove("input-error"),!0)}function validateJob(){return""===inputJob.value?(inputJob.classList.add("input-error"),!1):(inputJob.classList.remove("input-error"),!0)}const imageInput=document.querySelector("#image-input");function validateImage(){const e=document.querySelector("#error-image"),t=JSON.parse(localStorage.getItem("Details"));return/.(gif|jpeg|jpg|png)$/i.test(imageInput.value)||""!==t.image?(e.classList.add("hidden"),!0):(e.classList.remove("hidden"),!1)}function validateLinkedin(){const e=document.querySelector("#error-linkedin");return""===inputLinkedin.value?(inputLinkedin.classList.add("input-error"),e.classList.remove("hidden"),!1):(inputLinkedin.classList.remove("input-error"),e.classList.add("hidden"),!0)}function validateGithub(){const e=document.querySelector("#error-github");return""===inputGithub.value?(inputGithub.classList.add("input-error"),e.classList.remove("hidden"),!1):(inputGithub.classList.remove("input-error"),e.classList.add("hidden"),!0)}imageInput.addEventListener("change",validateImage);const cardForm=document.querySelector("#card__form"),buttonCreate=document.querySelector("#btn-create");function validateAll(){return!0===validateJob()&&!0===validateFullName()&&!0===validateEmail()&&!0===validateLinkedin()&&!0===validateGithub()&&!0===validateImage()?(globalError.classList.add("hidden"),buttonCreate.classList.remove("btn-create-inactive"),!0):(globalError.classList.remove("hidden"),buttonCreate.classList.add("btn-create-inactive"),validateJob(),validateFullName(),validateEmail(),validateLinkedin(),validateGithub(),validateImage(),!1)}formTopShare.addEventListener("click",validateAll);const cardShare=document.querySelector("#card-share");function shareLink(e){!0===validateAll()?(cardShare.classList.remove("hidden"),e.preventDefault()):(cardShare.classList.add("hidden"),e.preventDefault())}const inputImage=document.querySelector("#image-input"),btnReset=document.querySelector("#btn-reset");let palette1Value=palette1.value,palette2Value=palette2.value,palette3Value=palette3.value,fullNameValue=inputFullName.value,jobValue=inputJob.value,imageSource=inputImage.scr,telfValue=inputTelf.value,emailValue=inputEmail.value,linkedinValue=inputLinkedin.value,githubValue=inputGithub.value,storedData={palette:"",name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:""};function storePalette(){palette2.checked?(storedData.palette=palette2.value,console.log(storedData)):palette3.checked?(storedData.palette=palette3.value,console.log(storedData)):(storedData.palette=palette1.value,console.log(storedData)),storeData()}function storeFullName(){storedData.name=inputFullName.value,storeData()}function storeJob(){storedData.job=inputJob.value,storeData()}function storeEmail(){storedData.email=inputEmail.value,storeData()}function storeTelf(){storedData.phone=inputTelf.value,storeData()}function storeLinkedin(){storedData.linkedin=inputLinkedin.value,storeData()}function storeGithub(){storedData.github=inputGithub.value,storeData()}function storeData(){localStorage.setItem("Details",JSON.stringify(storedData))}function checkLocalStorage(){null!==localStorage.getItem("Details")&&(retrieveData(),init())}function retrieveData(){void 0!==(storedData=JSON.parse(localStorage.getItem("Details"))).palette&&(storedData.palette===palette2.value?(palette2.checked=!0,palette1.checked=!1,palette3.checked=!1):storedData.palette===palette3.value?(palette3.checked=!0,palette2.checked=!1,palette1.checked=!1):(palette3.checked=!1,palette2.checked=!1,palette1.checked=!0)),""!==storedData.name&&(inputFullName.value=storedData.name),""!==storedData.job&&(inputJob.value=storedData.job),""!==storedData.email&&(inputEmail.value=storedData.email),""!==storedData.phone&&(inputTelf.value=storedData.phone),""!==storedData.linkedin&&(inputLinkedin.value=storedData.linkedin),""!==storedData.github&&(inputGithub.value=storedData.github)}function setTheme(){palette2.checked?previewPalette2():palette3.checked?previewPalette3():previewPalette1()}function setImage(){""!==storedData.photo&&(profileImage.style.backgroundImage=`url(${storedData.photo})`,profilePreview.style.backgroundImage=`url(${storedData.photo})`)}function init(){printName(),printJob(),fillTelf(),fillEmail(),fillLinkedin(),fillGithub(),setTheme(),setImage()}function reset(){localStorage.removeItem("Details"),inputFullName.value="",inputJob.value="",inputEmail.value="",inputTelf.value="",inputLinkedin.value="",inputGithub.value="",cardName.innerHTML="Nombre Apellidos",cardJob.innerHTML="Front-end developer",palette1.checked=!0;const e="./assets/images/profile-picture.gif";profileImage.style.backgroundImage=`url(${e})`,profilePreview.style.backgroundImage=`url(${e})`,fillTelf(),fillEmail(),fillLinkedin(),fillGithub(),setTheme(),validateAll(),cardShare.classList.add("hidden")}window.addEventListener("load",checkLocalStorage),palette1.addEventListener("click",storePalette),palette2.addEventListener("click",storePalette),palette3.addEventListener("click",storePalette),inputFullName.addEventListener("change",storeFullName),inputJob.addEventListener("change",storeJob),inputEmail.addEventListener("change",storeEmail),inputTelf.addEventListener("change",storeTelf),inputLinkedin.addEventListener("change",storeLinkedin),inputGithub.addEventListener("change",storeGithub),btnReset.addEventListener("click",reset);const urlBase="https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",cardLink=document.querySelector("#card-link");let photoSend="";function sendData(){fetch(urlBase,{method:"POST",body:localStorage.getItem("Details"),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>showURL(e)).catch(function(e){console.log(e)}),shareLink(event)}function showURL(e){e.success?(cardLink.innerHTML=`<a class="twitter-url" href=${e.cardURL} target="_blank">${e.cardURL}</a>`,twitterLink(e.cardURL)):cardLink.innerHTML="ERROR: "+e.error}function twitterLink(e){document.querySelector("#twitter-share").href=`https://twitter.com/intent/tweet?text=He%20creado%20esta%20tarjeta%20con%20Awesome%20Profile%20Cards:%0A${e}`}buttonCreate.addEventListener("click",sendData);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,storedData.photo=fr.result,storeData()}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);